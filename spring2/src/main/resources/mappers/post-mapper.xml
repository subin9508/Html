<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.itwill.spring2.repository.PostDao">
  
    <!-- posts 테이블 전체 검색. 목록 보기. -->
    <select id="selectOrderByIdDesc" resultType="Post">
        select * from posts order by id desc
    </select>
    
    <!-- posts 테이블에서 id(PK)로 검색. 상세보기. -->
    <select id="selectById" resultType="Post">
        select * from posts where id = #{id} <!-- myBatis에서는 ? 대신 #{} 형식으로 작성 -->
    </select>
    
    <!-- posts 테이블에 행 삽입. 새 글 작성. -->
    <!-- insert, update, delete는 리턴 타입이 행의 개수를 리턴하기 때문에 항상 int. 따라서 resultType을 지정할 필요 없음. -->
    <insert id="insertPost"> <!-- id가 곧 메서드 이름 -->
        insert into posts (title, content, author)
        values (#{title}, #{content}, #{author}) <!-- Model 담당 클래스의 필드 이름과 같아야 함. (getter, setter 호출하기 위해) -->
    </insert>
    
    <!-- posts 테이블에서 해당 id의 제목과 내용, 수정시간 업데이트. -->
    <update id="updatePost">
        update posts set title = #{title}, content = #{content}, modified_time = systimestamp where id = #{id}
    </update>
    
    
    <!-- posts 테이블에서 해당 id의 행을 삭제. -->
    <delete id="deletePost">
        delete from posts where id = #{id}
    </delete>
  </mapper>